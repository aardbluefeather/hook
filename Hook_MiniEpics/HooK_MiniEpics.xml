<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<muclient>
<plugin
   name="HooK_MiniEpics"
   author="BlueFeather"
   id="2a0221da142c2505699c5adb"
   language="Lua"
   purpose="Mini epic (Titan/Terra) triggers and reports"
   save_state="y"
   date_written="2019-06-26 21:47:01"
   requires="5.06"
   version="1.0"
   >
<description trim="y">
<![CDATA[
A collection of triggers for use in Titan and Terra miniepics - to make life there easier.
]]>
</description>

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger match="* grabs a nearby shield to defend himself!"                       enabled="y" keep_evaluating="y" sequence="99"><send>echo shield up!</send></trigger>
  <trigger match="* wears a Mighty Shield as a shield."                             enabled="y" keep_evaluating="y" sequence="99"><send>echo shield up!</send></trigger>
  <trigger match="With awesome force * cleaves *'s shield in half!"                 enabled="y" keep_evaluating="y" sequence="99"><send>echo shield down!</send></trigger>
  <trigger match="* quaffs a potion of Sanctuary."                                  enabled="y" keep_evaluating="y" sequence="99"><send>echo sanc up!</send></trigger>
  <trigger match="* is surrounded by a shimmering white aura of divine protection." enabled="y" keep_evaluating="y" sequence="99"><send>echo sanc up!</send></trigger>
  <trigger match="The white aura around *'s body vanishes."                         enabled="y" keep_evaluating="y" sequence="99"><send>echo dispel!</send></trigger>
</triggers>

<!--  Plugin help  -->

<aliases>
  <alias script="toggle_debug" match="miniepics_debug" enabled="y"></alias>
</aliases>

<script>
<![CDATA[
env_active = false

-----------------
-- Zone awareness
-----------------
function OnPluginBroadcast(msg, id, name, text)
  if env_active then
    if text == 'room.area' then
      Note('room.area received! We switched the area!!')
      Note('This is what we know about current area:')
    elseif text == 'ok_you_can_go_now' then
      Note('mapper said that it is ok to move now!')
    else
      Note('msg: ['..msg..'], id: ['..id..'], name: ['..name..'], text: ['..text..']')
    end
  end
end

function toggle_debug()
  if env_active then
    env_active = false
    Note('MiniEpics debug: [OFF]')
  else
    env_active = true
    Note('MiniEpics debug: [ON]')
  end
end

]]>
</script> 

</muclient>
